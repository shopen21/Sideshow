/**
 @license
 Sideshow - An incredible Javascript interactive help Library
 Version: 0.4.8
 Date: 2017-02-12
 Author: Fortes Informática http://www2.fortesinformatica.com.br/
 Available under Apache License 2.0 (https://raw2.github.com/fortesinformatica/sideshow/master/LICENSE)
 **/

!function(t,e,i,s){!function(e,i){var s=i();"function"==typeof define&&define.amd?define(i):t[e]=s}("sideshow",function(){function n(t,e){this.name="SSException",this.message="[SIDESHOW_E#"+("00000000"+t).substr(-8)+"] "+e}function o(t,e){console.warn("[SIDESHOW_W#"+("00000000"+t).substr(-8)+"] "+e)}function r(t){console.warn("[DEPRECATION_WARNING] "+t)}function a(t){if(t.constructor!==String)return t;var e=""===t?"0":t;return+e.replace("px","")}function h(t){return x.config.language in t?t[x.config.language]:(o("2001","String not found for the selected language, getting the first available."),t[Object.keys(t)[0]])}function d(){w.keyup(u)}function l(){w.unbind("keyup",u)}function u(t){27!=t.keyCode&&112!=t.keyCode||x.close()}function c(){w.keyup(function(t){113==t.keyCode&&(t.shiftKey?x.start({listAll:!0}):x.start())})}function p(){e('[class*="sideshow"]').not(".sideshow-mask-part, .sideshow-mask-corner-part, .sideshow-subject-mask").remove()}function f(t){for(var e in t)if(t.hasOwnProperty(e)){var i=t[e];for(var s in i)i.hasOwnProperty(s)&&($[e][s]=i[s])}}if(void 0===e)throw new n("2","jQuery is required for Sideshow to work.");if(void 0===i)throw new n("3","Jazz is required for Sideshow to work.");if(void 0===s)throw new n("4","Pagedown (the Markdown parser used by Sideshow) is required for Sideshow to work.");var g,m,w,b,v="Sideshow",C=150,S=600,x={get VERSION(){return"0.4.8"}},y=[],k={lockMaskUpdate:!1,changingStep:!1,skippingStep:!1,running:!1},I=[],T=i.Enum("VISIBLE","FADING_IN","FADING_OUT","NOT_DISPLAYED","NOT_RENDERED","TRANSPARENT");n.prototype=new Error,n.prototype.constructor=n;var $={availableWizards:{en:"Available Tutorials","pt-br":"Tutoriais Disponíveis",es:"Tutoriales Disponibles"},relatedWizards:{en:"Related Wizards","pt-br":"Tutoriais Relacionados",es:"Tutoriales Relacionados"},noAvailableWizards:{en:"There's no tutorials available.","pt-br":"Não há tutoriais disponíveis para esta tela.",es:"No hay tutoriales disponibles."},close:{en:"Close","pt-br":"Fechar",es:"Cerrar"},estimatedTime:{en:"Estimated Time","pt-br":"Tempo Estimado",es:"Tiempo Estimado"},next:{en:"Next","pt-br":"Continuar",es:"Continuar"},finishWizard:{en:"Finish Wizard","pt-br":"Concluir Tutorial",es:"Concluir Tutorial"}};x.config={},x.config.userPreferencesRoute=null,x.config.loggedInUser=null,x.config.language="en",x.config.autoSkipIntro=!1,x.config.tranlations={availableWizards:{},relatedWizards:{},noAvailableWizards:{},close:{},estimatedTime:{},next:{},finishWizard:{}},x.ControlVariables={},x.ControlVariables.set=function(t,e){var i={};return this.isDefined(t)?i=this.getNameValuePair(t):y.push(i),i.name=t,i.value=e,t+"="+e},x.ControlVariables.setIfUndefined=function(t,e){if(!this.isDefined(t))return this.set(t,e)},x.ControlVariables.isDefined=function(t){return void 0!==this.getNameValuePair(t)},x.ControlVariables.get=function(t){var e=this.getNameValuePair(t);return e?e.value:void 0},x.ControlVariables.getNameValuePair=function(t){for(var e=0;e<y.length;e++){var i=y[e];if(i.name===t)return i}},x.ControlVariables.remove=function(t){return y.splice(y.indexOf(this.getNameValuePair(t)),1)},x.ControlVariables.clear=function(){y=[]};var j=i.Class()["abstract"];j.field("$el"),j.field("status",T.NOT_RENDERED),j.method("render",function(t){(t||m).append(this.$el),this.status=T.NOT_DISPLAYED}),j.method("destroy",function(){this.$el.remove()});var E=i.Class().extending(j)["abstract"];E.method("show",function(t){this.$el||this.render(),t||this.$el.removeClass("sideshow-invisible"),this.$el.removeClass("sideshow-hidden"),this.status=T.VISIBLE}),E.method("hide",function(t){t||this.$el.addClass("sideshow-hidden"),this.$el.addClass("sideshow-invisible"),this.status=T.NOT_DISPLAYED});var M=i.Class().extending(E)["abstract"];M.method("fadeIn",function(t,e){var i=this;i.status=T.FADING_IN,i.$el||this.render(),e&&i.$el.css("animation-timing-function","linear"),i.$el.removeClass("sideshow-hidden"),setTimeout(function(){i.$el.removeClass("sideshow-invisible"),setTimeout(function(){i.status=T.VISIBLE,e&&i.$el.css("animation-timing-function","ease"),t&&t()},S)},20)}),M.method("fadeOut",function(t,e){var i=this;i.status!=T.NOT_RENDERED&&(i.status=T.FADING_OUT,e&&i.$el.css("animation-timing-function","linear"),i.$el.addClass("sideshow-invisible"),setTimeout(function(){i.$el.addClass("sideshow-hidden"),i.status=T.NOT_DISPLAYED,e&&i.$el.css("animation-timing-function","ease"),t&&t()},S))});var z=i.Class(function(t){this.name=t.name,this.title=t.title,this.description=t.description,this.estimatedTime=t.estimatedTime,this.affects=t.affects,this.preparation=t.preparation,this.listeners=t.listeners,this.showStepPosition=t.showStepPosition,this.relatedWizards=t.relatedWizards});z.field("preparation"),z.field("listeners"),z.field("showStepPosition"),z.field("relatedWizards"),z.field("name"),z.field("title"),z.field("description"),z.field("estimatedTime"),z.field("affects"),z.field("_storyline"),z.field("currentStep"),z.method("storyLine",function(t){this._storyline=t}),z.method("play",function(){var t=this;if(L.enqueue("check_composite_mask_subject_changes",function(){A.CompositeMask.singleInstance.pollForSubjectChanges()}),L.enqueue("check_arrow_changes",function(){B.pollForArrowsChanges(!0)}),!this._storyline)throw new n("201","A wizard needs to have a storyline.");var e=this._storyline.steps;if(0===e.length)throw new n("202","A storyline must have at least one step.");P.singleInstance.render(),W.singleInstance.render();var i=this.listeners;i&&i.beforeWizardStarts&&i.beforeWizardStarts(),k.changingStep=!0,this.showStep(e[0],function(){L.enqueue("check_completed_step",function(){t.pollForCheckCompletedStep()})}),A.CompositeMask.singleInstance.fadeIn()}),z.method("showStep",function(t,e){function i(t){k.skippingStep=!0,o.next()}function n(){if(o.currentStep=t,t.skipIf&&t.skipIf()&&i(o),k.changingStep&&!k.skippingStep){t.subject?x.setSubject(t.subject):x.setEmptySubject(),A.CompositeMask.singleInstance.update(O.position,O.dimension,O.borderRadius);var n=A.SubjectMask.singleInstance;n.fadeOut(function(){t.lockSubject&&n.show(!0)}),P.singleInstance.show(),P.singleInstance.positionate();var r=W.singleInstance,a=t.text;if(a=a instanceof Function?x.heredoc(a):a,"html"==t.format?r.setHTML(a):"markdown"==t.format?r.setHTML((new s.Converter).makeHtml(a)):r.setText(a),r.setTitle(t.title),r.setStepPosition(o.getStepPosition()+1+"/"+o._storyline.steps.length),t.showNextButton||t.autoContinue===!1||!(t.completingConditions&&t.completingConditions.length>0)){var d=o._storyline.steps[o.getStepPosition()+1];d?r.nextButton.setText(h($.next)+": "+o._storyline.steps[o.getStepPosition()+1].title):r.nextButton.setText(h($.finishWizard)),r.nextButton.show(),t.autoContinue===!1&&r.nextButton.disable()}else r.nextButton.hide();t.targets&&t.targets.length>0&&(B.setTargets(t.targets),B.render(t.arrowPosition),B.positionate(),B.fadeIn()),r.show(!0),A.CompositeMask.singleInstance.scrollIfNecessary(O.position,O.dimension)||(r.positionate(),r.fadeIn()),e&&e(),k.changingStep=!1}}var o=this;k.skippingStep=!1,B.clear(),this.currentStep&&this.currentStep.listeners&&this.currentStep.listeners.afterStep&&this.currentStep.listeners.afterStep(),t&&t.listeners&&t.listeners.beforeStep?t.listeners.beforeStep(n):n()}),z.method("next",function(t,e){if(!k.changingStep||k.skippingStep){k.changingStep=!0;var i=this.currentStep;e=e||this._storyline.steps[this.getStepPosition(this.currentStep)+1];var s=this;this.hideStep(function(){if(e)s.showStep(e,function(){t&&t()});else{i&&i.listeners&&i.listeners.afterStep&&i.listeners.afterStep();var n=b;b=null;var o=s.listeners;o&&o.afterWizardEnds&&o.afterWizardEnds(),x.showRelatedWizardsList(n)||x.close()}})}}),z.method("hideStep",function(t){W.singleInstance.fadeOut(function(){P.singleInstance.hide()}),B.fadeOut(),A.SubjectMask.singleInstance.update(O.position,O.dimension,O.borderRadius),A.SubjectMask.singleInstance.fadeIn(t)}),z.method("getStepPosition",function(t){return this._storyline.steps.indexOf(t||this.currentStep)}),z.method("isEligible",function(){function e(t,e,i){return i?t===e:t.toLowerCase()===e.toLowerCase()}for(var i=t.location,s=0;s<this.affects.length;s++){var n=this.affects[s];if(n instanceof Function){if(n())return!0}else if(n instanceof Object){if("route"in n){var o=i.pathname+i.search+i.hash;if(e(o,n.route,n.caseSensitive))return!0}if("hash"in n&&e(location.hash,n.hash,n.caseSensitive))return!0;if("url"in n&&e(location.href,n.url,n.caseSensitive))return!0}}return!1}),z.method("isAlreadyWatched",function(){return!1}),z.method("pollForCheckCompletedStep",function(){var t=this.currentStep.completingConditions;if(t&&t.length>0&&!k.skippingStep){for(var e=!0,i=0;i<t.length;i++){var s=t[i];s()||(e=!1)}e&&(this.currentStep.autoContinue===!1?W.singleInstance.nextButton.enable():b.next())}}),z.method("prepareAndPlay",function(){if(b=this,this.isEligible())this.play();else{if(!this.preparation)throw new n("203","This wizard is not eligible neither has a preparation function.");this.preparation(function(){b.play()})}});var P=i.Class().extending(M).singleton;P.field("dimension",{}),P.field("position",{}),P.method("render",function(){this.$el=e("<div>").addClass("sideshow-details-panel").addClass("sideshow-hidden"),this.callSuper("render")}),P.method("positionate",function(){for(var t=A.CompositeMask.singleInstance.parts,e=[[t.top,"height"],[t.right,"width"],[t.bottom,"height"],[t.left,"width"]].sort(function(t,e){return t[0].dimension[t[1]]-e[0].dimension[e[1]]}),i=e.slice(-1)[0],s=2;s>0;s--){var n=e[s],o=n[0].dimension;o.width>250&&o.height>250&&o.width+o.height>2*(i[0].dimension.width+i[0].dimension.height)&&(i=n)}"width"==i[1]?this.$el.css("left",i[0].position.x).css("top",0).css("height",N.dimension.height).css("width",i[0].dimension.width):this.$el.css("left",0).css("top",i[0].position.y).css("height",i[0].dimension.height).css("width",N.dimension.width),this.dimension={width:a(this.$el.css("width")),height:a(this.$el.css("height"))},this.position={x:a(this.$el.css("left")),y:a(this.$el.css("top"))}});var B={};B.arrows=[],B.clear=function(){this.arrows=[]},B.setTargets=function(t,i){if(t.constructor===String&&(t=e(t)),t instanceof e&&t.length>0)t.each(function(){var t=R.build();t.target.$el=e(this),t.target.$el.is(":visible")&&(B.arrows.push(t),t.onceVisible=!0)});else if(!i)throw new n("150","Invalid targets.")},B.recreateDOMReferences=function(){for(var t=0;t<this.arrows.length;t++){var e=this.arrows[t];e.$el.remove()}B.clear(),B.setTargets(b.currentStep.targets,!0),B.render(),B.positionate(),B.show()},B.show=function(){for(var t=0;t<this.arrows.length;t++){var e=this.arrows[t];e.show()}},B.hide=function(){for(var t=0;t<this.arrows.length;t++){var e=this.arrows[t];e.hide()}},B.fadeIn=function(){for(var t=0;t<this.arrows.length;t++){var e=this.arrows[t];e.fadeIn()}},B.fadeOut=function(){function t(t){t.fadeOut(function(){t.destroy()})}for(var e=0;e<this.arrows.length;e++){var i=this.arrows[e];t(i)}},B.positionate=function(){for(var t=0;t<this.arrows.length;t++){var e=this.arrows[t];e.positionate()}},B.render=function(t){for(var e=0;e<this.arrows.length;e++){var i=this.arrows[e];i.position=t||"top",i.render()}},B.pollForArrowsChanges=function(){for(var t=!1,e=0;e<this.arrows.length;e++){var i=this.arrows[e];i.hasChanged()&&i.positionate(),i.onceVisible&&!i.target.$el.is(":visible")&&(t=!0)}t&&this.recreateDOMReferences()};var R=i.Class().extending(M);R.field("target",{}),R.field("position",""),R.field("onceVisible",!1),R.method("render",function(){this.$el=e("<div>").addClass("sideshow-subject-arrow").addClass(this.position).addClass("sideshow-hidden").addClass("sideshow-invisible"),this.callSuper("render")}),R.method("positionate",function(){var t=this.target,e=this.position;t.position={x:t.$el.offset().left-g.scrollLeft(),y:t.$el.offset().top-g.scrollTop()},t.dimension={width:a(t.$el.outerWidth()),height:a(t.$el.outerHeight())};var i={top:{x:t.position.x+t.dimension.width/2-20+"px",y:t.position.y-30+"px"},right:{x:t.position.x+t.dimension.width-12+"px",y:t.position.y+t.dimension.height/2-6+"px"},bottom:{x:t.position.x+t.dimension.width/2-35+"px",y:t.position.y+t.dimension.height+2+"px"},left:{x:t.position.x-35+"px",y:t.position.y+t.dimension.height/2-22+"px"}};this.$el.css({left:i[e].x,top:i[e].y})}),R.method("show",function(){this.callSuper("show"),this.positionate()}),R.method("fadeIn",function(){this.callSuper("fadeIn"),this.positionate()}),R.method("hasChanged",function(){return this.target.dimension.width!==this.target.$el.outerWidth()||this.target.dimension.height!==this.target.$el.outerHeight()||this.target.position.y!==this.target.$el.offset().top-g.scrollTop()||this.target.position.x!==this.target.$el.offset().left-g.scrollLeft()});var W=i.Class(function(){this.nextButton=_.build()}).extending(M).singleton;W.field("text",""),W.field("title",""),W.field("dimension",{}),W.field("position",{}),W.field("nextButton"),W.method("setText",function(t){this.text=t,this.$el.find(".sideshow-step-text").text(t)}),W.method("setHTML",function(t){this.text=t,this.$el.find(".sideshow-step-text").html(t)}),W.method("setTitle",function(t){this.title=t,this.$el.find("h2:first").text(t)}),W.method("setStepPosition",function(t){this.stepPosition=t,this.$el.find(".sideshow-step-position").text(t)}),W.method("render",function(){this.$el=e("<div>").addClass("sideshow-step-description").addClass("sideshow-hidden").addClass("sideshow-invisible");var t=e("<span>").addClass("sideshow-step-position");this.$el.append(t),b.showStepPosition===!1&&t.hide(),this.$el.append(e("<h2>")),this.$el.append(e("<div>").addClass("sideshow-step-text")),this.nextButton.render(this.$el),this.nextButton.$el.click(function(){b.next()}),P.singleInstance.$el.append(this.$el)}),W.method("show",function(t){this.callSuper("show",t)}),W.method("positionate",function(){var t=P.singleInstance;t.dimension.width>=900?this.dimension.width=900:this.dimension.width=.9*t.dimension.width,this.$el.css("width",this.dimension.width);var e=(a(this.$el.css("padding-left"))+a(this.$el.css("padding-right")))/2,i=(a(this.$el.css("padding-top"))+a(this.$el.css("padding-bottom")))/2;this.dimension.height=a(this.$el.outerHeight()),this.dimension.height>t.dimension.height||this.dimension.width<400?(this.dimension.width=.9*g.width(),this.$el.css("width",this.dimension.width),this.dimension.height=a(this.$el.outerHeight()),this.position.x=(g.width()-this.dimension.width)/2,this.position.y=(g.height()-this.dimension.height)/2):(this.position.x=(t.dimension.width-this.dimension.width)/2,this.position.y=(t.dimension.height-this.dimension.height)/2),this.$el.css("left",this.position.x-e),this.$el.css("top",this.position.y-i)});var _=i.Class().extending(E);_.field("_text"),_.method("disable",function(){this.$el.attr("disabled","disabled")}),_.method("enable",function(){this.$el.attr("disabled",null)}),_.method("setText",function(t){this._text=t,this.$el.text(t)}),_.method("render",function(t){this.$el=e("<button>").addClass("sideshow-next-step-button"),this.callSuper("render",t)});var N={};N.dimension={},N.hasChanged=function(){return g.width()!==this.dimension.width||g.height()!==this.dimension.height},N.updateInfo=function(){this.dimension.width=g.width(),this.dimension.height=g.height()};var O={};O.obj=null,O.dimension={},O.position={},O.borderRadius={},O.hasChanged=function(){return!!this.obj&&(this.obj.offset().left-g.scrollLeft()!==this.position.x||this.obj.offset().top-g.scrollTop()!==this.position.y||this.obj.outerWidth()!==this.dimension.width||this.obj.outerHeight()!==this.dimension.height||a(this.obj.css("border-top-left-radius"))!==this.borderRadius.leftTop||a(this.obj.css("border-top-right-radius"))!==this.borderRadius.rightTop||a(this.obj.css("border-bottom-left-radius"))!==this.borderRadius.leftBottom||a(this.obj.css("border-bottom-right-radius"))!==this.borderRadius.rightBottom||N.hasChanged())},O.updateInfo=function(t){void 0===t?(this.position.x=this.obj.offset().left-g.scrollLeft(),this.position.y=this.obj.offset().top-g.scrollTop(),this.dimension.width=this.obj.outerWidth(),this.dimension.height=this.obj.outerHeight(),this.borderRadius.leftTop=a(this.obj.css("border-top-left-radius")),this.borderRadius.rightTop=a(this.obj.css("border-top-right-radius")),this.borderRadius.leftBottom=a(this.obj.css("border-bottom-left-radius")),this.borderRadius.rightBottom=a(this.obj.css("border-bottom-right-radius"))):(this.position.x=t.position.x,this.position.y=t.position.y,this.dimension.width=t.dimension.width,this.dimension.height=t.dimension.height,this.borderRadius.leftTop=t.borderRadius.leftTop,this.borderRadius.rightTop=t.borderRadius.rightTop,this.borderRadius.leftBottom=t.borderRadius.leftBottom,this.borderRadius.rightBottom=t.borderRadius.rightBottom),N.updateInfo()},O.isSubjectVisible=function(t,e){return!(t.y+e.height>g.height()||t.y<0)};var A={};A.SubjectMask=i.Class().extending(M).singleton,A.SubjectMask.method("render",function(){this.$el=e("<div>").addClass("sideshow-subject-mask"),this.callSuper("render")}),A.SubjectMask.method("update",function(t,e,i){this.$el.css("left",t.x).css("top",t.y).css("width",e.width).css("height",e.height).css("border-radius",i.leftTop+"px "+i.rightTop+"px "+i.leftBottom+"px "+i.rightBottom+"px ")}),A.CompositeMask=i.Class().extending(M).singleton,A.CompositeMask.method("init",function(){var t=this;["top","left","right","bottom"].forEach(function(e){t.parts[e]=A.CompositeMask.Part.build()}),["leftTop","rightTop","leftBottom","rightBottom"].forEach(function(e){t.parts[e]=A.CompositeMask.CornerPart.build()})}),A.CompositeMask.field("parts",{}),A.CompositeMask.method("render",function(){var t=this;for(var i in this.parts){var s=this.parts[i];s.render&&s.render()}this.$el=e(".sideshow-mask-part, .sideshow-mask-corner-part"),A.SubjectMask.singleInstance.render(),["leftTop","rightTop","leftBottom","rightBottom"].forEach(function(e){t.parts[e].$el.addClass(e)}),this.status=T.NOT_DISPLAYED}),A.CompositeMask.method("scrollIfNecessary",function(t,i){function s(t,i){e("body,html").animate({scrollTop:t},300,i)}if(!O.isSubjectVisible(t,i)){var n=W.singleInstance,o=i.height>g.height()-50?t.y:t.y-25;return o+=g.scrollTop(),s(o,function(){setTimeout(function(){P.singleInstance.positionate(),n.positionate(),n.fadeIn()},300)}),!0}return!1}),A.CompositeMask.method("update",function(t,e,i){A.SubjectMask.singleInstance.update(t,e,i);var s=t.x,n=t.y,o=e.width,r=e.height,a=i;this.parts.top.update({x:0,y:0},{width:g.width(),height:n}),this.parts.left.update({x:0,y:n},{width:s,height:r}),this.parts.right.update({x:s+o,y:n},{width:g.width()-(s+o),height:r}),this.parts.bottom.update({x:0,y:n+r},{width:g.width(),height:g.height()-(n+r)}),this.parts.leftTop.update({x:s,y:n},a.leftTop),this.parts.rightTop.update({x:s+o-a.rightTop,y:n},a.rightTop),this.parts.leftBottom.update({x:s,y:n+r-a.leftBottom},a.leftBottom),this.parts.rightBottom.update({x:s+o-a.rightBottom,y:n+r-a.rightBottom},a.rightBottom)}),A.CompositeMask.method("pollForSubjectChanges",function(){if(!k.lockMaskUpdate){if(b&&b.currentStep.subject){var t=e(b.currentStep.subject);O.obj[0]!==t[0]&&x.setSubject(t,!0)}O.hasChanged()&&(O.updateInfo(),this.update(O.position,O.dimension,O.borderRadius))}}),A.CompositeMask.method("pollForScreenChanges",function(){N.hasChanged()&&(N.updateInfo(),this.update(O.position,O.dimension,O.borderRadius))}),A.CompositeMask.Part=i.Class(function(t,e){this.position=t,this.dimension=e}).extending(j);var D=A.CompositeMask.Part;D.field("position",{}),D.field("dimension",{}),D.method("render",function(){this.$el=e("<div>").addClass("sideshow-mask-part").addClass("sideshow-hidden").addClass("sideshow-invisible"),this.callSuper("render")}),D.method("update",function(t,e){this.position=t,this.dimension=e,this.$el.css("left",t.x).css("top",t.y).css("width",e.width).css("height",e.height)}),A.CompositeMask.CornerPart=i.Class().extending(j);var V=A.CompositeMask.CornerPart;V.field("position",{}),V.field("dimension",{}),V.field("borderRadius",0),V["static"].SVGPathPointsTemplate=function(t){return"m 0,0 0,"+t+" C 0,"+.46*t+" "+.46*t+",0 "+t+",0"},V["static"].buildSVG=function(t){function i(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}var s=this.SVGPathPointsTemplate(t),n=e(i("svg")),o=e(i("path"));return o.attr("d",s),n.append(o),n[0]},V.prototype.render=function(){return this.$el=e("<div>").addClass("sideshow-mask-corner-part").addClass("sideshow-hidden").addClass("sideshow-invisible"),this.$el.append(V.buildSVG(this.borderRadius)),m.append(this.$el),this.$el},V.prototype.update=function(t,i){this.$el.css("left",t.x).css("top",t.y).css("width",i).css("height",i),e(this.$el).find("path").attr("d",V.SVGPathPointsTemplate(i))};var L={};L.queue=[],L.lock=!1,L.enqueue=function(){var t,e=arguments[0],i="";if("function"==typeof e?t=e:(i=arguments[0],t=arguments[1]),!(this.getFunctionIndex(t)<0&&(""===i||this.getFunctionIndex(i)<0)))throw new n("301","The function is already in the polling queue.");this.queue.push({name:i,fn:t,enabled:!0})},L.dequeue=function(){this.queue.splice(this.getFunctionIndex(arguments[0]),1)},L.enable=function(){this.queue[this.getFunctionIndex(arguments[0])].enabled=!0},L.disable=function(){this.queue[this.getFunctionIndex(arguments[0])].enabled=!1},L.getFunctionIndex=function(){var t=arguments[0];if("function"==typeof t)return this.queue.map(function(t){return t.fn}).indexOf(t);if("string"==typeof t)return this.queue.map(function(t){return t.name}).indexOf(t);throw new n("302","Invalid argument for getFunctionIndex method. Expected a string (the polling function name) or a function (the polling function itself).")},L.start=function(){this.lock=!1,this.doPolling()},L.stop=function(){this.lock=!0},L.clear=function(){var t=this.lock;this.lock=!0,this.queue=[],this.lock=t},L.doPolling=function(){this.lock||setTimeout(function(){for(var t=0;t<L.queue.length;t++){var e=L.queue[t];e.enabled&&e.fn()}L.doPolling()},C)};var F={};if(F.render=function(t){function i(t,e){t.click(function(){F.hide(function(){e.prepareAndPlay()})})}var s=e("<div>").addClass("sideshow-wizard-menu");this.$el=s;var n=e("<h1>").addClass("sideshow-wizard-menu-title");if(s.append(n),t.length>0){for(var o=e("<ul>"),r=0;r<t.length;r++){var a=t[r],d=e("<li>"),l=e("<h2>").text(a.title);if(a.title||a.description){var u=a.description;u.length>100&&(u=u.substr(0,100)+"...");var c=e("<span>").addClass("sideshow-wizard-menu-item-description").text(u),p=e("<span>").addClass("sideshow-wizard-menu-item-estimated-time").text(a.estimatedTime);d.append(p,l,c),o.append(d)}i(d,a)}s.append(o)}else e("<div>").addClass("sideshow-no-wizards-available").text(h($.noAvailableWizards)).appendTo(s);m.append(s)},F.show=function(t,e){1==t.length&&x.config.autoSkipIntro?t[0].prepareAndPlay():(x.setEmptySubject(),A.CompositeMask.singleInstance.update(O.position,O.dimension,O.borderRadius),A.CompositeMask.singleInstance.fadeIn(),F.render(t),e?this.setTitle(e):this.setTitle(h($.availableWizards)))},F.hide=function(t){var e=this,i=e.$el;i&&i.addClass("sideshow-menu-closed"),setTimeout(function(){i&&i.hide(),t&&t()},S)},F.setTitle=function(t){this.$el.find(".sideshow-wizard-menu-title").text(t)},x.init=function(){g=e(t),w=e(t.document),m=e("body",t.document),c(),L.start(),A.CompositeMask.singleInstance.init(),k.lockMaskUpdate=!0,A.CompositeMask.singleInstance.render(),f(this.config.tranlations)},x.heredoc=function(t){return t.toString().match(/[^]*\/\*([^]*)\*\/\}$/)[1]},x.close=function(){b||F.hide(),P.singleInstance.fadeOut(),this.CloseButton.singleInstance.fadeOut(),B.fadeOut(),setTimeout(function(){A.CompositeMask.singleInstance.status!==T.VISIBLE&&A.CompositeMask.singleInstance.status!==T.FADING_IN||A.CompositeMask.singleInstance.fadeOut(),A.SubjectMask.singleInstance.fadeOut()},S),p(),L.clear(),x.ControlVariables.clear(),l(),b=null,k.running=!1},x.runWizard=function(t){r("This method is deprecated and will be removed until the next major version of Sideshow.");var e=I.filter(function(e){return e.name===t})[0];if(b=e,!e)throw new n("205","There's no wizard with name "+t+".");if(e.isEligible())e.play();else{if(!e.preparation)throw new n("204","This wizard hasn't preparation.");e.preparation(function(){setTimeout(function(){e.play()},1e3)})}},x.gotoStep=function(){var t,e=arguments[0],i=b._storyline.steps;if(k.skippingStep=!0,"number"==typeof e){if(!(e<=i.length))throw new n("401","There's no step in the storyline with position "+e+".");t=i[e-1]}else if("string"==typeof e&&(t=i.filter(function(t){return t.name===e})[0],!t))throw new n("401","There's no step in the storyline with name "+e+".");setTimeout(function(){b.next(null,t)},100)},x.setEmptySubject=function(){k.lockMaskUpdate=!0,O.obj=null,O.updateInfo({dimension:{width:0,height:0},position:{x:0,y:0},borderRadius:{leftTop:0,rightTop:0,leftBottom:0,rightBottom:0}})},x.setSubject=function(t,i){if(t.constructor===String&&(t=e(t)),t instanceof e&&t.length>0){if(1!==t.length)throw new n("101","A subject must have only one element. Multiple elements by step will be supported in future versions of Sideshow.");O.obj=t,O.updateInfo(),k.lockMaskUpdate=!1}else{if(!i)throw new n("100","Invalid subject.");x.setEmptySubject()}},x.registerWizard=function(t){var e=z.build(t);return I.push(e),e},x.getElegibleWizards=function(t){for(var e=[],i=!1,s=0;s<I.length;s++){var n=I[s];n.isEligible()&&(n.isAlreadyWatched()||(i=!0),e.push(n))}return!t||i?e:[]},x.showWizardsList=function(){var t=arguments[0],e=arguments[1],i="boolean"!=typeof t&&t,s=t instanceof Array?t:this.getElegibleWizards(i);return F.show(s,e),s.length>0},x.showRelatedWizardsList=function(t){var e=t.relatedWizards;if(!e)return!1;var i=I.filter(function(t){return e.indexOf(t.name)>-1&&(t.isEligible()||t.preparation)});return 0!=i.length&&(L.clear(),x.ControlVariables.clear(),x.showWizardsList(i,h($.relatedWizards)),!0)},x.CloseButton=i.Class().extending(M).singleton,x.CloseButton.method("render",function(){this.$el=e("<button>").addClass("sideshow-close-button").text(h($.close)),this.$el.click(function(){x.close()}),this.callSuper("render")}),x.start=function(t){if(t=t||{},!k.running){var e="onlyNew"in t&&!!t.onlyNew,i="listAll"in t&&!!t.listAll,s=t.wizardName;if(i)x.showWizardsList(I.filter(function(t){return t.isEligible()||t.preparation}));else if(s){var o=I.filter(function(t){return t.name===s})[0];if(!o)throw new n("205","There's no wizard with name '"+s+"'.");o.prepareAndPlay()}else x.showWizardsList(e);this.CloseButton.singleInstance.render(),this.CloseButton.singleInstance.fadeIn(),d(),k.running=!0,L.enqueue("check_composite_mask_screen_changes",function(){A.CompositeMask.singleInstance.pollForScreenChanges()})}},void 0!==t[v])throw new n("1",'The global access point "Sideshow" is already being used.');t[v]=x})}(this,jQuery,Jazz,Markdown);